<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Mini-lib</title>
    <link rel="stylesheet" href="login.css">
  </head>
    <body>
      <form onsubmit="return false;"> 
  <input checked id='signin' name='action' type='radio' value='signin'>
  <label for='signin'>Войти</label>
  <input id='signup' name='action' type='radio' value='signup'>
  <label for='signup'>Зарегистрироваться</label>
  <input id='reset' name='action' type='radio' value='reset'>
  <label for='reset'>Сброс</label>
  <div id='wrapper'>
    <div id='arrow'></div>
    <input placeholder='Логин*' id="login" type="text" required>
    <input placeholder='Пароль*' id="password" type="password" autocomplete="password">
    <input placeholder='Повторить пароль*' id='repass' type="password">
    <input placeholder='Почта*' id='email' type="text">
  </div>
  <label class="custom-checkbox" style="float: left; width: 300px;">
    <input class="hidden-checkbox" type="checkbox" id="checkbox1zaal1" style="float: left;">
    <div class="checkbox" style="float: left;">
      <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" border="2px solid rgb(255, 255, 255)"><path fill="#ffffff" d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/></svg>
    </div>
    <div>Запомнить меня</div>
  </label>
  <button class="login" id="btn" type='submit'>
    <span onclick="export2json()">
      Сбросить пароль
      <br>
      Войти
      <br>
      Принять
    </span>
  </button>
</form>
<div id='hint'>Нажмите на поля<br>* — так обозначаются поля необходимые для заполнения</div>
      <script src="./login.js"></script>
      <script>

        // сохранение данных в файл.json

        function export2json() {
          const originalData = {
            user: [{
                login: localStorage.getItem('login'),
                region: localStorage.getItem('region'),
                city: localStorage.getItem('city'),
                address: localStorage.getItem('address')
              }
            ]
          };

          var fs = require('fs');

          fs.writeFile("./src/settings.json", JSON.stringify(originalData), function(error){
 
            if(error) throw error; // если возникла ошибка
            console.log("Асинхронная запись файла завершена. Содержимое файла:");
            let data = fs.readFileSync("./src/settings.json", "utf8");
            console.log(data);  // выводим считанные данные
          });
        }

        // сохранение строк
      
        function save() {
          var checkbox = document.getElementById('checkbox1zaal1');
          localStorage.setItem('checkbox1zaal1', checkbox.checked);

          var serialObj = document.getElementById('login');
          localStorage.setItem("login", serialObj.value);

          var serialObj = document.getElementById('password');
          localStorage.setItem("password", serialObj.value);

          var serialObj = document.getElementById('repass');
          localStorage.setItem("repass", serialObj.value);

          var serialObj = document.getElementById('email');
          localStorage.setItem("email", serialObj.value);

        }

        // вывод сохранённых строк снова в свои строки

        function load() {    
          var checked = JSON.parse(localStorage.getItem('checkbox1zaal1'));
          document.getElementById("checkbox1zaal1").checked = checked;

          var returnObj = localStorage.getItem("login");
          document.getElementById("login").value = returnObj;

          var returnObj = localStorage.getItem("password");
          document.getElementById("password").value = returnObj;

          var returnObj = localStorage.getItem("repass");
          document.getElementById("repass").value = returnObj;

          var returnObj = localStorage.getItem("email");
          document.getElementById("email").value = returnObj;
        }

        document.getElementById('checkbox1zaal1').addEventListener('click', function () {
            var checked = this.checked;
            
            if (checked) {
              save();
            } else {
              wis()
            }
        });

        var localValue = localStorage.getItem('login');
        var localValue2 = localStorage.getItem('password');
        var localValue3 = localStorage.getItem('repass');
        var localValue4 = localStorage.getItem('email');
        console.log(localValue,localValue2,localValue3,localValue4);

        function wis()  {
          localStorage.clear()
        }

        load();
      </script>
    </body>
<!-- https://codepen.io/m0n4d/pen/qJBazW?editors=1100 -->
<!-- https://codepen.io/_fbrz/pen/pvZRNK -->
</html>