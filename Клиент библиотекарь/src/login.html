<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Mini-lib</title>
        <link rel="stylesheet" href="index.css">
        <link rel="stylesheet" href="login.css">
    </head>
    <body>
        <div class="panel">
		    <div class="state"><br><i class="fa fa-unlock-alt"></i><br><h1>Вход</h1></div>
		    <div class="form" method="post">
			    <input placeholder='Логин' id="login" type="text">
			    <input placeholder='Пароль' id="password" type="password">
			    <div class="login" id="btn" type="button">Войти</div>
		    </div>
        <div class="fack"><a href="regist.html"><i class="fa fa-question-circle"></i>Вы ещё не зарегистрированы?</a></div>
        <div class="fack"><a href=""><i class="fa fa-question-circle"></i>Забыли пароль?</a></div>
      </div>
      <script>
        ws.onmessage = function (event) {
        };
      </script>
      <script>
        document.getElementById('btn').onclick = function() {
          var log = document.getElementById('login').value;
          var password = document.getElementById('password').value;
          var ret;
          var ws = new WebSocket("ws://127.0.0.1:8765/"),
              messages = document.createElement('ul');
              ws.onopen = function () {
                  let data = {
                      comm: 'login',
                      login: log,
                      password: password
                  };
                  let json = JSON.stringify(data);
                   ws.send(json);
              };
              ws.onmessage = function (event) {
                    ret = JSON.parse(event.data);
                
                    if(ret.res != "None") {
                      alert('Пароль верный');
                      window.close()
                    } else {
                      alert('Пароль неверный');
                      document.getElementById('login').value = '';
                      document.getElementById('password').value = '';
            }
          };
        }
      </script>
    </body>
<!-- https://codepen.io/retyui/pen/NPPzrd -->
</html>